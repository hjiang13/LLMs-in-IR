Compute the sum and product of elements in a vector while handling various conditions and optimizations for performance.